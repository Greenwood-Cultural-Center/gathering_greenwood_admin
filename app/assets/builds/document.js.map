{
  "version": 3,
  "sources": ["../../javascript/document.js"],
  "sourcesContent": ["document.addEventListener(\"DOMContentLoaded\", () => {\n    paramKey = 'document'\n    window.scrollTo(0, 0)\n\n    $('#document_url').on('change', function(e) {\n        const value = e.target.value;\n    })\n\n    initBuildings();\n    initPeople();\n\n    function initPeople() {\n        $('#person-question .btn-primary').on('click', function () {\n        $('#person-question').fadeOut()\n        $('#person-fields').fadeIn()\n        })\n\n        let autocompleteTimeout;\n\n        $('#person-autocomplete').on('keyup', (e) => {\n        if (e.keyCode === 13) {\n            e.stopPropagation()\n        }\n        const input = e.target\n        const value = input.value\n        if (value.length > 1) {\n            if (autocompleteTimeout) {\n            window.clearTimeout(autocompleteTimeout);\n            }\n            autocompleteTimeout = window.setTimeout(() => {\n            $.getJSON('/people/autocomplete', { term: value }, (json) => {\n                const people = []\n                json.forEach((person) => {\n                people.push(`<div class=\"list-group-item list-group-item-action\" data-person=${person.id}>${person.name} (${person.id}) - ${person.years}</div>`)\n                })\n                $('#person-results').html(people).show()\n                $('#person-results .list-group-item').on('click', (e) => {\n                const id = e.target.dataset.person\n                const name = e.target.innerHTML\n                addPerson(id, name)\n                input.value = null\n                $('#person-results').html('')\n                })\n            })\n            }, 500)\n        }\n        })\n    }\n\n    function initBuildings() {\n        $('#building-question .btn-primary').on('click', function () {\n        $('#building-question').fadeOut()\n        $('#building-fields').fadeIn()\n        })\n\n        $('#building-autocomplete').on('keyup', (e) => {\n        if (e.keyCode === 13) {\n            e.stopPropagation()\n        }\n        const input = e.target\n        const value = input.value\n        if (value.length > 1) {\n            $.getJSON('/buildings/autocomplete', { term: value }, (json) => {\n            const buildings = []\n            json.forEach((building) => {\n                buildings.push(`<div class=\"list-group-item list-group-item-action\" data-building=${building.id} data-lat=\"${building.lat}\" data-lon=\"${building.lon}\">${building.address}</div>`)\n            })\n            $('#building-results').html(buildings).show()\n            $('#building-results .list-group-item').on('click', (e) => {\n                const id = e.target.dataset.building\n                const lat = e.target.dataset.lat\n                const lon = e.target.dataset.lon\n                const address = e.target.innerHTML\n                addBuilding(id, address, lat, lon)\n                input.value = null\n                $('#building-results').html('')\n            })\n            })\n        }\n        })\n    }\n\n    function addBuilding(id, address, lat, lon) {\n        const formId = `documents_building_ids_${id}`\n        $(`#${formId}`).closest('.form-check').remove()\n        const html = `<div class=\"form-check\"><input type=\"checkbox\" class=\"form-check-input\" name=\"${paramKey}[building_ids][]\" id=\"${formId}\" value=\"${id}\" checked /><label class=\"form-check-label\" for=\"${formId}\">${address}</label></div>`\n        $(`.${paramKey}_building_ids`).append(html)\n        if ($(`.${paramKey}_building_ids input:checked`).length === 1) {\n        // $(`#photograph_latitude`).val(lat)\n        // $(`#photograph_longitude`).val(lon).trigger('change')\n        }\n    }\n\n    function addPerson(id, name) {\n        const formId = `${paramKey}_person_ids_${id}`\n        $(`#person-fields input[value=${id}]`).closest('.form-check').remove()\n        const html = `<div class=\"form-check\"><input type=\"checkbox\" class=\"form-check-input\" name=\"${paramKey}[person_ids][]\" id=\"${formId}\" value=\"${id}\" checked /><label class=\"form-check-label\" for=\"${formId}\">${name}</label></div>`\n        $(`.${paramKey}_person_ids`).append(html)\n    }\n})"],
  "mappings": "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",
  "names": ["e"]
}
